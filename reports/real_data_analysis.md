# H&M 실제 데이터 기반 쇼핑 패턴 분석 결과

## 📊 데이터 규모

- **거래 수**: 31,788,324건
- **사용자 수**: 1,346,566명
- **상품 수**: 105,542개

---

## 🔍 주요 발견사항

### 1. **나이-가격대 상관관계** (가설과 다름!)

**가설**: 나이가 많을수록 high budget 비율이 높을 것
**실제**: 나이와 가격대의 상관관계가 **매우 약함**

| 나이대 | low | medium | high |
|--------|-----|--------|------|
| **18-25세** | 41.2% | 42.1% | 16.6% |
| **26-35세** | 38.7% | 41.0% | 20.4% |
| **36-50세** | 39.8% | 41.2% | 19.0% |
| **51-65세** | 35.2% | 42.8% | 22.0% |

**인사이트**:
- 모든 나이대에서 **medium 가격대가 40-43%**로 가장 높음
- 나이 증가에 따른 high budget 증가는 **미미함** (16.6% → 22.0%)
- 젊은 층도 high budget 구매 활발 (16.6%)

---

### 2. **나이-카테고리 선호도** (예상과 다름!)

**가설**: 나이에 따라 카테고리 선호도가 크게 다를 것
**실제**: 모든 나이대에서 **tops/bottoms가 압도적** (65-70%)

| 나이대 | tops | bottoms | dresses | shoes | accessories | outerwear |
|--------|------|---------|---------|-------|-------------|-----------|
| **18-25세** | 34.7% | 33.5% | 19.4% | 1.8% | 4.4% | 6.2% |
| **26-35세** | 33.4% | 32.6% | 21.6% | 2.3% | 3.4% | 6.7% |
| **36-50세** | 32.0% | 35.9% | 20.1% | 1.9% | 3.0% | 7.2% |
| **51-65세** | 33.4% | 34.0% | 20.3% | 1.7% | 2.5% | 8.0% |

**인사이트**:
- **tops + bottoms = 65-70%** (모든 나이대)
- dresses는 19-22%로 안정적
- shoes/accessories는 **매우 낮음** (1-4%)
- 나이 증가 시 outerwear 약간 증가 (6.2% → 8.0%)

---

### 3. **구매 빈도 분포**

**전체 사용자 기준**:
- **monthly**: 53.3% (가장 많음)
- **occasionally**: 24.7%
- **weekly**: 22.0%

**인사이트**:
- 대부분의 사용자가 **월 1회 이상** 구매
- weekly 구매자도 22%로 상당히 높음

---

### 4. **가격대-구매빈도 상관관계** (약한 상관관계)

| 가격대 | weekly | monthly | occasionally |
|--------|--------|---------|--------------|
| **low** | 22.0% | 51.8% | 26.2% |
| **medium** | 21.7% | 55.1% | 23.2% |
| **high** | 24.6% | 40.8% | 34.6% |

**인사이트**:
- high budget → occasionally 비율 증가 (26.2% → 34.6%)
- 하지만 여전히 **monthly가 가장 높음** (40.8%)
- 가격대와 빈도의 상관관계는 **예상보다 약함**

---

### 5. **전체 카테고리 분포**

| 카테고리 | 비율 |
|----------|------|
| **bottoms** | 33.9% |
| **tops** | 33.4% |
| **dresses** | 20.4% |
| **outerwear** | 6.9% |
| **accessories** | 3.4% |
| **shoes** | 2.0% |

**인사이트**:
- tops + bottoms = **67.3%** (압도적)
- shoes는 **2%에 불과** (매우 낮음)

---

## 💡 가설 vs 실제 비교

### 가설 (Enhanced Fallback)

| 패턴 | 가설 | 실제 데이터 | 차이 |
|------|------|-------------|------|
| **나이-예산** | 강한 상관관계 (젊을수록 low) | 약한 상관관계 | ❌ 가설 틀림 |
| **나이-스타일** | 젊을수록 trendy | 데이터 없음 (스타일 정보 없음) | - |
| **나이-카테고리** | 다양한 선호도 | 모든 나이대 유사 (tops/bottoms 압도적) | ❌ 가설 틀림 |
| **예산-빈도** | high → weekly | high → occasionally 약간 증가 | ⚠️ 부분적으로 맞음 |

---

## 🎯 데이터 기반 페르소나 생성 전략

### 전략 1: 실제 분포 그대로 반영

**장점**: 가장 현실적
**단점**: 나이/성별과 무관하게 유사한 페르소나 생성

```python
# 모든 나이대에서 동일한 가중치
budget_weights = [40, 41, 19]  # low, medium, high
category_weights = [33, 34, 20, 2, 3, 7]  # tops, bottoms, dresses, shoes, accessories, outerwear
```

### 전략 2: 약한 상관관계 반영 (권장)

**장점**: 현실성 + 다양성
**단점**: 실제 데이터와 약간 차이

```python
# 나이에 따라 약간의 가중치 조정
if age <= 25:
    budget_weights = [45, 40, 15]  # low 약간 증가
elif age > 50:
    budget_weights = [35, 43, 22]  # high 약간 증가
else:
    budget_weights = [40, 41, 19]  # 실제 분포
```

### 전략 3: 하이브리드 (실제 데이터 + 도메인 지식)

**장점**: 현실성 + 상식
**단점**: 주관적 판단 필요

```python
# 실제 데이터를 기반으로 하되, 
# 명백히 비현실적인 조합은 가중치 조정
# 예: 젊은 여성 → dresses 가중치 약간 증가
```

---

## 📝 권장사항

### 1. **즉시 적용 가능한 개선**

실제 데이터의 **전체 분포**를 기본값으로 사용:

```python
# 가격대 (모든 나이대 평균)
budget_weights = [39, 42, 19]  # low, medium, high

# 카테고리 (전체 분포)
category_weights = [33, 34, 20, 2, 3, 7]  # tops, bottoms, dresses, shoes, accessories, outerwear

# 구매 빈도 (전체 분포)
frequency_weights = [22, 53, 25]  # weekly, monthly, occasionally
```

### 2. **나이별 미세 조정**

실제 데이터에서 관찰된 **약한 경향성** 반영:

- 51-65세: high budget +6%p
- 51-65세: outerwear +2%p

### 3. **성별 정보 활용 불가**

H&M 데이터에 성별 정보가 없어 성별-카테고리 상관관계 추출 불가
→ 기존 가설 유지 또는 전체 분포 사용

---

## 🚀 다음 단계

1. **virtual_user.py 업데이트**
   - 실제 데이터 기반 가중치 적용
   - `shopping_patterns.json` 로드하여 사용

2. **A/B 테스트 재실행**
   - 데이터 기반 페르소나로 테스트
   - 결과 비교 (가설 기반 vs 데이터 기반)

3. **추가 분석 고려**
   - 성별 정보 추가 (customers.csv 확인)
   - 스타일 정보 추출 (articles.csv의 다른 컬럼 활용)
   - 계절성 분석

---

**생성일**: 2026-01-15
**데이터 소스**: H&M 거래 데이터 (31.7M 건)
**파일**: `data/shopping_patterns.json`
